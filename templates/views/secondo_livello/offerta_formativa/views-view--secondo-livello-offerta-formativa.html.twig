{#
/**
 * @file
 * Default theme implementation for main view template.
 *
 * Available variables:
 * - attributes: Remaining HTML attributes for the element.
 * - css_name: A CSS-safe version of the view name.
 * - css_class: The user-specified classes names, if any.
 * - header: The optional header.
 * - footer: The optional footer.
 * - rows: The results of the view query, if any.
 * - empty: The content to display if there are no rows.
 * - pager: The optional pager next/prev links to display.
 * - exposed: Exposed widget form/info to display.
 * - feed_icons: Optional feed icons to display.
 * - more: An optional link to the next page of results.
 * - title: Title of the view, only used when displaying in the admin preview.
 * - title_prefix: Additional output populated by modules, intended to be
 *   displayed in front of the view title.
 * - title_suffix: Additional output populated by modules, intended to be
 *   displayed after the view title.
 * - attachment_before: An optional attachment view to be displayed before the
 *   view content.
 * - attachment_after: An optional attachment view to be displayed after the
 *   view content.
 * - dom_id: Unique id for every view being printed to give unique class for
 *   JavaScript.
 *
 * @see template_preprocess_views_view()
 *
 * @ingroup themeable
 */
#}
{% apply spaceless %}
  {% set classes = [
    'section',
    'section-padding',
    'bg-bluelectric-dark',
    'py-0',
    'view',
    'view-' ~ id|clean_class,
    'view-id-' ~ id,
    'view-name-' ~ css_name,
    'view-display-id-' ~ display_id,
    dom_id ? 'js-view-dom-id-' ~ dom_id,
  ] %}
  {% set _id = 'view-' ~ id|clean_id ~ '--' ~ 'view-display-id-' ~ display_id|clean_id %}

  <section{{ attributes.addClass(classes) }}>
    {{ title_prefix }}
    {{ title }}
    {{ title_suffix }}

    {% if header %}
      <header class="container">
        <div class="row g-0">
          <div class="col-md-4 col-lg-3 d-flex flex-column">
            <div class="h6 text-white ms-4 mb-5 mt-auto">
              <span class="mb-1 d-block">La Scuola</span>
              <span class="d-block"><abbr aria-label="Anno Scolastico">A.S.</abbr> {{ anno_scolastico_corrente }}</span>
            </div>
          </div>
          <div class="col-md-8 col-lg-9 bg-bluelectric p-5">
            <div class="ps-lg-5">
              {{ header }}
            </div>
          </div>
        </div>
      </header>
    {% endif %}

    {{ exposed }}
    {{ attachment_before }}

    {% if rows -%}
      <div class="container">
        <div class="row g-0">
          <div class="col-md-4 col-lg-3">
            <div class="nav nav-tabs nav-tabs-vertical nav-dark" id="{{ _id }}--nav" role="tablist" aria-orientation="vertical">
              {% for item in rows %}
                {% set _clean_title = item['#title']|render|striptags|trim|clean_id %}
                {% set _nav_link_attributes = create_attribute()
                  .addClass([
                    'nav-link',
                    'py-4',
                    loop.first ? ' active',
                  ])
                  .setAttribute('id', _id ~ '--tab-' ~ _clean_title)
                  .setAttribute('data-bs-toggle', 'tab')
                  .setAttribute('href', '#' ~ _id ~ '--pane-' ~ _clean_title)
                  .setAttribute('role', 'tab')
                  .setAttribute('aria-controls', _id ~ '--pane-' ~ _clean_title)
                  .setAttribute('aria-selected', lopp.first ? 'true', 'false')
                %}
                <a{{ _nav_link_attributes }}>
                  {{ item['#title'] }}
                </a>
              {% endfor %}
            </div>
          </div>

          <div class="col-md-8 col-lg-9 bg-bluelectric ms-0 d-flex flex-column">
            <div class="tab-content ps-lg-5 mb-5" id="{{ _id }}--content">
              {{ rows }}
            </div>
            {% include '@bi-bcl/button/button.html.twig' with {
              label: 'Vai alla presentazione della scuola',
              tag: 'a',
              url: '/la-scuola',
              variant: 'redbrown',
              size: 'lg',
              assistive_text: 'Vai alla pagina di presentazione della scuola',
              button_classes: ['my-5', 'mx-4', 'mt-auto', 'w-auto']
            }%}
          </div>
        </div>
      </div>
    {% elseif empty -%}
      {{ empty }}
    {% endif %}
    {{ pager }}

    {{ attachment_after }}
    {{ more }}

    {% if footer %}
      <footer>
        {{ footer }}
      </footer>
    {% endif %}

    {{ feed_icons }}
  </section>
{% endapply %}
